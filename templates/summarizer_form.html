{% extends "base.html" %}

{% block title %}{{ page_title }}{% endblock %}

{% block header %}{{ page_header }}{% endblock %}

{% block content %}
<h2>{{ form_instructions }}</h2>
<form id="youtubeForm" action="YoutubeSummarizer" method="POST">
    <div class="form-group">
        <label for="Key">{{ video_key_label }}</label>
        <p class="small">{{ video_key_help }}</p>
        <input type="text" name="Key" class="form-control" value="https://www.youtube.com/watch?v=FkUNHhVbQ1Q" id="Key">
    </div>
    <div class="form-group">
        <label for="minChunk">{{ min_chunk_label }}</label>
        <input type="text" name="minChunk" class="form-control" value="2" id="minChunk">
    </div>
    <p>Please wait after clicking Summarize. It will take about 1 second for every minute of video length.</p>
    <button type="submit" class="btn btn-primary">Summarize</button>
</form>

<p><br></p>
<p class="text-muted" align="center"><small>
    The content generated by this application is for informational purposes only and is provided "as-is" without any warranties, express or implied. By using this application, you acknowledge that the developers and contributors are not liable for any claims, damages, or other liabilities arising from the use of the generated content.
</small></p>

<script>
    document.getElementById('youtubeForm').addEventListener('submit', function(event) {
        var keyInput = document.getElementById('Key').value;
        var minChunkInput = document.getElementById('minChunk').value;

        // Validate the minChunk input
        var minChunk = parseInt(minChunkInput, 10);
        if (isNaN(minChunk) || minChunk < 1 || minChunk > 10) {
            alert('Please enter a valid whole number between 1 and 10 for the "How many minutes do you want summarized into one sentence?" field.');
            event.preventDefault(); // Prevent form submission
            return;
        }

        // Validate the Key input
        var youtubeUrlPattern = /^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/?.*$/;
        if (!youtubeUrlPattern.test(keyInput)) {
            alert('Please enter a valid YouTube video URL.');
            event.preventDefault(); // Prevent form submission
            return;
        }
    });
</script>
{% endblock %}
